!function(){"use strict";angular.module("mikeslist",["ui.router"]).run(["$transitions","$state",function(t,o){t.onError({},function(){o.go("root-state.categories-state")})}]).value("globals",{admin:!1})}();
!function(){"use strict";angular.module("mikeslist").config(["$stateProvider","$locationProvider","$urlRouterProvider",function(t,e,i){i.otherwise("/");var o={name:"root-state",abstract:!0,component:"rootComponent"},s={name:"root-state.categories-state",url:"/",views:{"content-view":"categoriesComponent"},resolve:{categories:["categoriesService",function(t){return t.getAllCategories()}]}},n={name:"root-state.listings-state",url:"/category/{category}",views:{"content-view":"listingsComponent"},resolve:{listings:["categoriesService","$stateParams",function(t,e){return t.getListingsForCategory(e.category)}]}},r={name:"root-state.listing-state",url:"/listing/{listingId}",views:{"content-view":"listingComponent"},resolve:{listing:["listingsService","$stateParams",function(t,e){return t.getListing(e.listingId)}]}},a={name:"root-state.new-listing-state",views:{"content-view":"postListingFormComponent"},resolve:{categories:["categoriesService",function(t){return t.getAllCategories()}]}};t.state(o),t.state(s),t.state(n),t.state(r),t.state(a),e.html5Mode(!0)}])}();
!function(){"use strict";angular.module("mikeslist").component("categoriesComponent",{bindings:{categories:"<"},controller:["$scope",function(o){var t=this;t.broadcastCloseAllOthers=function(t){o.$broadcast("close:forms",t)}}],templateUrl:"js/app/components/categories-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("categoryWidgetComponent",{bindings:{category:"<",onBeginEdit:"&"},controller:["globals","$timeout","categoriesService","$state","$scope",function(e,t,n,o,i){var c=this;c.editing=!1,c.globals=e,c.$onInit=function(){c.newValue=c.category.name},c.beginEdit=function(){c.onBeginEdit({except:c.category}),c.editing=!0,t(function(){document.getElementById("category-edit-field").focus()})},c.cancelEdit=function(){c.editing=!1,c.newValue=c.category.name},c.submitForm=function(){n.editCategory(c.category.name,{name:c.newValue}).then(function(){c.editing=!1,o.go(o.current,{},{reload:!0})}).catch(function(e){window.alert(e.data.error),console.error(e)})},i.$on("close:forms",function(e,t){t._id!==c.category._id&&c.cancelEdit()})}],templateUrl:"/js/app/components/category-widget-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("createCategoryWidgetComponent",{bindings:{onBeginEdit:"&"},controller:["categoriesService","globals","$state","$timeout","$scope",function(e,t,n,o,i){var c=this;c.globals=t,c.editing=!1,c.category="",c.cancelEdit=function(){c.editing=!1,c.category=""},c.beginEdit=function(){c.onBeginEdit({except:"new"}),c.editing=!0,o(function(){document.getElementById("category-create-field").focus()})},c.submitCategory=function(){e.createNewCategory(c.category).then(function(){c.editing=!1,n.go(n.current,{},{reload:!0})}).catch(function(e){window.alert(e.data.error),console.error(e)})},i.$on("close:forms",function(e,t){"new"!==t&&c.cancelEdit()})}],templateUrl:"/js/app/components/create-category-widget-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("footerComponent",{templateUrl:"js/app/components/footer-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("headerComponent",{controller:["globals",function(n){var o=this;o.globals=n,o.toggleAdmin=function(){n.admin=!n.admin}}],templateUrl:"js/app/components/header-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("listingComponent",{bindings:{listing:"<"},controller:["globals",function(n){var t=this;t.globals=n}],templateUrl:"js/app/components/listing-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("listingsComponent",{bindings:{listings:"<"},templateUrl:"js/app/components/listings-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("postListingFormComponent",{bindings:{categories:"<"},controller:["listingsService","$state","$scope",function(t,e,o){var i=this;i.listing={categories:[]},i.checkboxesState=[],o.$watch(function(){return i.checkboxesState},function(){i.listing.categories=i.checkboxesState.filter(function(t){return t})},!0),i.submitForm=function(){0===i.listing.categories.length?window.alert("You must pick at least 1 category"):t.postListing(i.listing).then(function(t){e.go("root-state.listing-state",{listingId:t._id},{reload:!0})}).catch(function(t){window.alert("An error has occured while saving listing"),console.error(t),e.go("root-state.categories-state",{},{reload:!0})})}}],templateUrl:"/js/app/components/post-listing-form-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").component("rootComponent",{templateUrl:"js/app/components/root-component.tpl"})}();
!function(){"use strict";angular.module("mikeslist").service("categoriesService",["$http",function(t){var e=this;e.getAllCategories=function(){return t.get("/api/v1/categories").then(function(t){return t.data})},e.getListingsForCategory=function(e){return t.get("/api/v1/category/"+e).then(function(t){return t.data})},e.createNewCategory=function(e){return t.post("/api/v1/category",{name:e}).then(function(t){return t.data})},e.editCategory=function(e,n){return t.put("/api/v1/category/"+e,n).then(function(t){return t.data})}}])}();
!function(){"use strict";angular.module("mikeslist").service("listingsService",["$http",function(t){var i=this;i.getListing=function(i){return t.get("/api/v1/listing/"+i).then(function(t){return t.data})},i.postListing=function(i){return t.post("/api/v1/listing",i).then(function(t){return t.data})}}])}();
//# sourceMappingURL=main.js.map
